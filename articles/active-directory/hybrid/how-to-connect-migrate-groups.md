---
title: 'Azure AD Connect: groepen migreren van het ene forest naar het andere'
description: In dit artikel worden de stappen beschreven die nodig zijn om groepen van het ene forest naar het andere te migreren voor Azure AD Connect.
services: active-directory
author: billmath
manager: daveba
ms.service: active-directory
ms.topic: how-to
ms.workload: identity
ms.date: 04/02/2020
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: 5ef693a48dc52854e4e1fd8359ef24f65ce236f7
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 03/19/2021
ms.locfileid: "85358579"
---
# <a name="migrate-groups-from-one-forest-to-another-for-azure-ad-connect"></a>Groepen migreren van het ene forest naar het andere voor Azure AD Connect

In dit artikel wordt beschreven hoe u groepen van het ene forest naar het andere migreert, zodat de gemigreerde groeps objecten overeenkomen met de bestaande objecten in de Cloud.

## <a name="prerequisites"></a>Vereisten

- Azure AD Connect versie 1.5.18.0 of hoger
- Kenmerk bron anker ingesteld op `mS-DS-ConsistencyGuid`

## <a name="migrate-groups"></a>Groepen migreren

Vanaf versie 1.5.18.0 ondersteunt Azure AD Connect het gebruik van het `mS-DS-ConsistencyGuid` kenmerk voor groepen. Als u kiest `mS-DS-ConsistencyGuid` als bron anker kenmerk en de waarde wordt ingevuld in Active Directory, Azure AD Connect gebruikt de waarde van `mS-DS-ConsistencyGuid` als `immutableId` . Anders gaat u terug naar het gebruik van `objectGUID` . Maar houd er rekening mee dat Azure AD Connect de waarde niet naar het `mS-DS-ConsistencyGuid` kenmerk in Active Directory schrijft.

Tijdens een cross-forest verplaatsen, wanneer een groeps object van het ene forest (F1) wordt verplaatst naar een ander forest (bijvoorbeeld F2), moet u ofwel de `mS-DS-ConsistencyGuid` waarde (als deze aanwezig is) of de `objectGUID` waarde van het object in forest F1 kopiëren naar het `mS-DS-ConsistencyGuid` kenmerk van het object in F2.

Gebruik de volgende scripts als richt lijn voor meer informatie over het migreren van één groep van het ene forest naar het andere. U kunt deze scripts ook gebruiken als richt lijn voor de migratie van meerdere groepen. De scripts gebruiken de Forestnaam F1 voor het bron-forest en F2 voor de doel-forest.

Eerst krijgen we het `objectGUID` en `mS-DS-ConsistencyGuid` het groeps object in forest F1. Deze kenmerken worden geëxporteerd naar een CSV-bestand.
```
<#
DESCRIPTION
============
This script will take DN of a group as input.
It then copies the objectGUID and mS-DS-ConsistencyGuid values along with other attributes of the given group to a CSV file.

This CSV file can then be used as input to the Export-Group script.
#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $outputCsv
)

$defaultProperties = @('samAccountName', 'distinguishedName', 'objectGUID', 'mS-DS-ConsistencyGuid')
$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -Properties $defaultProperties -ErrorAction Stop
$results = @()
if ($group -eq $null)
{
       Write-Error "Group not found"
}
else
{
       $objectGUIDValue = [GUID]$group.'objectGUID'
       $mSDSConsistencyGuidValue = "N/A"
       if ($group.'mS-DS-ConsistencyGuid' -ne $null)
       {
              $mSDSConsistencyGuidValue = [GUID]$group.'mS-DS-ConsistencyGuid'
       }
       $adgroup = New-Object -TypeName PSObject
       $adgroup | Add-Member -MemberType NoteProperty -Name samAccountName -Value $($group.'samAccountName')
       $adgroup | Add-Member -MemberType NoteProperty -Name distinguishedName -Value $($group.'distinguishedName')
       $adgroup | Add-Member -MemberType NoteProperty -Name objectGUID -Value $($objectGUIDValue)
       $adgroup | Add-Member -MemberType NoteProperty -Name mS-DS-ConsistencyGuid -Value $($mSDSConsistencyGuidValue)
       $results += $adgroup
}

Write-Host "Exporting group to output file"
$results | Export-Csv "$outputCsv" -NoTypeInformation

```

Vervolgens gebruiken we het gegenereerde CSV-bestand voor uitvoer om het `mS-DS-ConsistencyGuid` kenmerk van het doel object in het F2 te stem pelen:


```
<#
DESCRIPTION
============
This script will take DN of a group as input and the CSV file that was generated by the Import-Group script.
It copies either the objectGUID or the mS-DS-ConsistencyGuid value from the CSV file to the given object.

#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $inputCsv
)

$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -ErrorAction Stop
if ($group -eq $null)
{
       Write-Error "Group not found"
}

$csvFile = Import-Csv -Path $inputCsv -ErrorAction Stop
$msDSConsistencyGuid = $csvFile.'mS-DS-ConsistencyGuid'
$objectGuid = [GUID] $csvFile.'objectGUID'
$targetGuid = $msDSConsistencyGuid

if ($msDSConsistencyGuid -eq "N/A")
{
       $targetGuid = $objectGuid
}

Set-ADGroup -Identity $dn -Replace @{'mS-DS-ConsistencyGuid'=$targetGuid} -ErrorAction Stop

```

## <a name="next-steps"></a>Volgende stappen
Meer informatie over [het integreren van uw on-premises identiteiten met Azure Active Directory](whatis-hybrid-identity.md).
