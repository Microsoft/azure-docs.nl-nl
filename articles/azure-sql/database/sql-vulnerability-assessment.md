---
title: Evaluatie van SQL-beveiligingsproblemen
titleSuffix: Azure SQL Database & SQL Managed Instance & Azure Synapse Analytics
description: Meer informatie over het configureren van SQL-beveiligings evaluatie en het interpreteren van de evaluatie rapporten over Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics.
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.custom: sqldbrb=3
ms.devlang: ''
ms.topic: how-to
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 09/21/2020
tags: azure-synapse
ms.openlocfilehash: 67258a19d1efe605a3a0b2227f107cc1928a207a
ms.sourcegitcommit: 8245325f9170371e08bbc66da7a6c292bbbd94cc
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/07/2021
ms.locfileid: "99806389"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>Evaluatie van SQL-beveiligings problemen helpt u bij het identificeren van database lekken
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

Evaluatie van SQL-beveiligings problemen is een eenvoudig te configureren service die u kunt gebruiken om potentiële database problemen op te lossen, op te sporen en te verhelpen. Gebruik de service om de beveiliging van uw database proactief te verbeteren.

De evaluatie van beveiligings problemen maakt deel uit van de [Azure Defender voor SQL](azure-defender-for-sql.md) -aanbieding, een uniform pakket voor geavanceerde SQL-beveiligings mogelijkheden. De evaluatie van beveiligings problemen kan worden geopend en beheerd via de centrale Azure Defender voor SQL-Portal.

> [!NOTE]
> Evaluatie van beveiligings problemen wordt ondersteund voor Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics. Data bases in Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics worden gezamenlijk aangeduid in de rest van dit artikel als data bases en de server verwijst naar de [Server](logical-servers.md) die als host fungeert voor de data bases voor Azure SQL database en Azure Synapse.

## <a name="what-is-sql-vulnerability-assessment"></a>Wat is de evaluatie van SQL-beveiligings problemen?

Evaluatie van SQL-beveiligings problemen is een service die inzicht krijgt in uw beveiligings status. De evaluatie van beveiligings problemen omvat stappen die kunnen worden uitgevoerd om beveiligings kwesties op te lossen en uw database beveiliging te verbeteren. U kunt hiermee een dynamische database omgeving bewaken, waar wijzigingen lastig zijn om uw SQL-beveiligings postuur bij te houden en te verbeteren.

Evaluatie van beveiligings problemen is een in Azure SQL Database ingebouwde Scan service. De service maakt gebruik van een Knowledge Base met regels voor het markeren van beveiligings problemen. Het markeert afwijkingen van aanbevolen procedures, zoals onjuiste configuraties, buitensporige machtigingen en onbeveiligde gevoelige gegevens.

De regels zijn gebaseerd op de best practices van micro soft en zich richten op de beveiligings problemen die de grootste Risico's voor uw data base en de waardevolle gegevens van de computer opleveren. Ze omvatten problemen op database niveau en beveiligings problemen op server niveau, zoals de server firewall-instellingen en machtigingen op server niveau.

De resultaten van de scan zijn onder andere stappen die kunnen worden uitgevoerd om elk probleem op te lossen en indien van toepassing aangepaste herstel scripts te bieden. U kunt een beoordelings rapport voor uw omgeving aanpassen door een acceptabele basis lijn in te stellen voor:

- Configuratie van machtigingen
- Functie configuraties
- Data base-instellingen

## <a name="configure-vulnerability-assessment"></a>Evaluatie van beveiligings problemen configureren

De volgende stappen configureren de evaluatie van beveiligings problemen:

1. Ga naar uw Azure SQL Database, SQL Managed instance data base of Azure Synapse-bron in de [Azure Portal](https://portal.azure.com).

2. Selecteer op de kop **beveiliging** **Security Center**.

3. Klik vervolgens op **configureren** op de koppeling om het deel venster Azure Defender voor SQL-instellingen te openen voor de hele server of een beheerd exemplaar.

    > [!NOTE]
    > Evaluatie van SQL-beveiligings problemen vereist dat **Azure Defender voor SQL** -plan scans kan uitvoeren. Zie [Azure Defender voor SQL](azure-defender-for-sql.md)voor meer informatie over het inschakelen van Azure Defender voor SQL.

4. Een opslag account configureren waarin de scan resultaten voor alle data bases op de server of het beheerde exemplaar worden opgeslagen. Zie [over Azure Storage-accounts](../../storage/common/storage-account-create.md)voor meer informatie over opslag accounts.

    > [!NOTE]
    > Voor meer informatie over het opslaan van scans van beveiligings problemen achter firewalls en VNets raadpleegt u [de resultaten van het scannen van beveiligings problemen in de Store in een opslag account dat toegankelijk is achter firewalls en VNets](sql-database-vulnerability-assessment-storage.md).

5. Evaluatie van SQL-beveiligings problemen configureren zodat automatisch periodieke terugkerende scans eenmaal per week worden uitgevoerd om een onjuiste configuratie van de beveiliging van wijzigingen te detecteren. Als u dit wilt doen, schakelt u **periodieke terugkerende scans** in onder de selectie van het opslag account. Er wordt een overzicht van de scan resultaten verzonden naar de e-mail adressen die u opgeeft in **Scan rapporten verzenden naar**. U kunt ook een e-mail melding verzenden naar beheerders en abonnements eigenaren door **ook e-mail meldingen te verzenden naar beheerders en abonnements eigenaren**.

6. Evaluatie van SQL-beveiligings problemen kan scannen op aanvraag uitvoeren. Nadat u SQL-evaluatie van beveiligings problemen hebt geconfigureerd, selecteert u **scannen** om uw data base te scannen op beveiligings problemen.

![Een Data Base scannen](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > De scan is licht gewicht en veilig. Het duurt een paar seconden om uit te voeren en is volledig alleen-lezen. Er worden geen wijzigingen aangebracht in uw data base.

## <a name="remediate-vulnerabilities"></a>Beveiligingsproblemen herstellen

1. Wanneer de scan is voltooid, wordt uw Scan rapport automatisch weer gegeven in de Azure Portal. Het rapport bevat een overzicht van de beveiligings status. Hier wordt weer gegeven hoeveel problemen er zijn gevonden en wat de bijbehorende ernst zijn. De resultaten omvatten waarschuwingen over de aanbevolen procedures en een moment opname van de beveiligings instellingen, zoals databaseprincipal en-rollen, en de bijbehorende machtigingen.

![Bekijk het rapport](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

2. Bekijk uw resultaten en bepaal de bevindingen in het rapport die van toepassing zijn op beveiligings problemen in uw omgeving. Inzoomen op elk mislukt resultaat om inzicht te krijgen in de gevolgen van de bevindingen en waarom elke beveiligings controle is mislukt. Gebruik de door het rapport verstrekte herstel gegevens om problemen op te lossen.

![Het rapport analyseren](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

3. Wanneer u de evaluatie resultaten bekijkt, kunt u specifieke resultaten markeren als een acceptabele *basis lijn* in uw omgeving. De basis lijn is in feite een aanpassing van de manier waarop de resultaten worden gerapporteerd. Resultaten die overeenkomen met de basis lijn, worden beschouwd als het door geven van de daaropvolgende scans. Nadat u de beveiligings status van uw basis lijn hebt ingesteld, evalueert het beveiligings risico alleen rapporten over afwijkingen van de basis lijn. Op deze manier kunt u uw aandacht richten op de relevante problemen.

![Uw basis lijn instellen](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

4. Nadat u klaar bent met het instellen van de **basis lijnen** van de regel, voert u een nieuwe scan uit om het aangepaste rapport weer te geven. De evaluatie van beveiligings problemen rapporteert nu alleen de beveiligings kwesties die afwijken van uw goedgekeurde basislijn status.

![Uw aangepaste rapport weer geven](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

De evaluatie van beveiligings problemen kan nu worden gebruikt om te controleren of uw Data Base op elk moment een hoog niveau van beveiliging houdt en dat aan uw organisatie beleid wordt voldaan. 

## <a name="advanced-capabilities"></a>Geavanceerde mogelijkheden

### <a name="export-an-assessment-report"></a>Exporteer een beoordelingsrapport

Selecteer **scan resultaten exporteren** om een Excel-rapport te downloaden dat kan worden gedownload van het resultaat van de scan. Dit rapport bevat een tabblad samen vatting waarop een samen vatting van de evaluatie wordt weer gegeven. Het rapport bevat alle mislukte controles. Het bevat ook een tabblad **resultaten** met de volledige set resultaten van de scan. De resultaten omvatten alle controles die zijn uitgevoerd en de resultaat Details voor elk.

### <a name="view-scan-history"></a>Bekijk het scanoverzicht

Selecteer **Scan geschiedenis** in het deel venster evaluatie van beveiligings problemen om een geschiedenis weer te geven van alle scans die eerder zijn uitgevoerd op deze data base. Selecteer een bepaalde scan in de lijst om de gedetailleerde resultaten van die scan te bekijken.

## <a name="manage-vulnerability-assessments-programmatically"></a>Evaluatie van beveiligings problemen programmatisch beheren

### <a name="using-azure-powershell"></a>Azure PowerShell gebruiken

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]
> [!IMPORTANT]
> De Power shell-Azure Resource Manager module wordt nog steeds ondersteund, maar alle toekomstige ontwikkeling is voor de module AZ. SQL. Zie [AzureRM.Sql](/powershell/module/AzureRM.Sql/) voor deze cmdlets. De argumenten voor de opdrachten in de Az-module en in de AzureRm-modules zijn vrijwel identiek.

U kunt Azure PowerShell-cmdlets gebruiken om de evaluatie van beveiligings problemen programmatisch te beheren. De ondersteunde cmdlets zijn:

| Naam van cmdlet als een koppeling | Description |
| :-------------------- | :---------- |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wist u de regel basis voor de evaluatie van beveiligings problemen.<br/>Stel eerst de basis lijn in voordat u deze cmdlet gebruikt om deze uit te scha kelen. |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Wist de instellingen voor evaluatie van beveiligings problemen van een Data Base. |
| [Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wordt de regel voor de evaluatie van beveiligings problemen voor een beheerde data base gewist.<br/>Stel eerst de basis lijn in voordat u deze cmdlet gebruikt om deze uit te scha kelen. |
| [Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Wist de instellingen voor evaluatie van beveiligings problemen van een beheerde data base. |
| [Clear-AzSqlInstanceVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-AzSqlInstanceVulnerabilityAssessmentSetting) | Wist de instellingen voor evaluatie van beveiligings problemen van een beheerd exemplaar. |
| [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Converteert beveiligings problemen van een Data Base naar een Excel-bestand. |
| [Convert-AzSqlInstanceDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Convert-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Conversie van beveiligings problemen van een beheerde Data Base naar een Excel-bestand. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wordt de regel voor de evaluatie van beveiligings problemen opgehaald van een Data Base voor een bepaalde regel. |
| [Get-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wordt de regel voor de evaluatie van beveiligings problemen opgehaald van een beheerde Data Base voor een bepaalde regel. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Hiermee worden alle Scan records voor evaluatie van beveiligings problemen opgehaald die zijn gekoppeld aan een bepaalde data base. |
| [Get-AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord) | Hiermee worden alle Scan records voor evaluatie van beveiligings problemen opgehaald die zijn gekoppeld aan een bepaalde beheerde data base. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Retourneert de instellingen voor evaluatie van beveiligings problemen van een Data Base. |
| [Get-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Retourneert de instellingen voor evaluatie van beveiligings problemen van een beheerde data base. |
| [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee stelt u de regel voor de evaluatie van beveiligings problemen. |
| [Set-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Set-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee stelt u de regel basis voor de evaluatie van beveiligings problemen voor een beheerde data base. |
| [Start-AzSqlDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Hiermee wordt het starten van een controle op beveiligings lekken voor een Data Base geactiveerd. |
| [Start-AzSqlInstanceDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Start-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Hiermee wordt het starten van een controle op beveiligings lekken voor een beheerde data base geactiveerd. |
| [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Hiermee worden de instellingen voor evaluatie van beveiligings problemen van een Data Base bijgewerkt. |
| [Update-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Hiermee worden de instellingen voor evaluatie van beveiligings problemen van een beheerde data base bijgewerkt. |
| [Update-AzSqlInstanceVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-AzSqlInstanceVulnerabilityAssessmentSetting) | Hiermee worden de instellingen voor evaluatie van beveiligings problemen van een beheerd exemplaar bijgewerkt. |
| &nbsp; | &nbsp; |

Zie voor een script voorbeeld de [Power Shell-ondersteuning voor beveiligings problemen van Azure SQL](/archive/blogs/sqlsecurity/azure-sql-vulnerability-assessment-now-with-powershell-support).

### <a name="using-resource-manager-templates"></a>Met behulp van Resource Manager-sjablonen

Gebruik het type voor het configureren van basis lijnen voor evaluatie van beveiligings problemen met behulp van Azure Resource Manager sjablonen `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` .

Zorg ervoor dat u hebt ingeschakeld `vulnerabilityAssessments` voordat u basis lijnen toevoegt.

Hier volgt een voor beeld van het definiëren van de VA2065 voor de Data Base `master` en het VA1143 naar `user` de-gegevens bron als resources in een resource manager-sjabloon:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

Voor `master` de data base en `user` de Data Base worden de resource namen op verschillende manieren gedefinieerd:

- Hoofd database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>Master</b>')]",
- Gebruikers database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>default</b>')]",

Als u Boole-typen wilt afhandelen als waar/onwaar, stelt u het basislijn resultaat in op een binaire invoer zoals ' 1 '/' 0 '.

```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Volgende stappen  

- Lees meer informatie over [Azure Defender voor SQL](azure-defender-for-sql.md).
- Meer informatie over [gegevens detectie en-classificatie](data-discovery-and-classification-overview.md).
- Meer informatie over [het opslaan van scans van beveiligings problemen in een opslag account dat toegankelijk is achter firewalls en VNets](sql-database-vulnerability-assessment-storage.md).
